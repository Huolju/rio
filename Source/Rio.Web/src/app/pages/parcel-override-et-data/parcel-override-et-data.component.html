<div class="container mt-sm-4" *ngIf="user">
    <div class="float-right pr-0">
        <div class="row">
          <div class="col-md-12" >
            <rio-water-year-select [years]="waterYears" [(selectedYear)]="waterYearToDisplay"
              (selectedYearChange)="updateAnnualData()" [(disabled)]="isEditing"></rio-water-year-select>
          </div>
        </div>
      </div>
    <h2>
        Override ET Data for - {{user.FullName}} - {{waterYearToDisplay}}
    </h2>
    <app-alert-display></app-alert-display>

    <div class="row mt-4" *ngIf="parcels && parcels.length > 0">
        <div class="col-sm-12">
            <div class="card">
                <div class="card-header">
                    <div class="float-right">
                        <label class="switch">
                            <input type="checkbox" [(ngModel)]="isEditing" (click)="toggleEditMode()" />
                            <div class="slider round">
                            <span class="off">View</span>
                            <span class="on">Edit</span>
                            </div>
                        </label>
                    </div>
                    {{waterYearToDisplay}} Water Usage by Parcel
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-condensed">
                            <thead>
                                <tr>
                                    <th>Parcel Number</th>
                                    <th *ngFor="let month of months">{{month}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let parcel of parcels">
                                    <td class="text-nowrap"><a routerLink="/parcels/{{parcel.ParcelID}}">{{parcel.ParcelNumber}}</a></td>
                                    <td class="text-right" [ngStyle]="{'color': parcelMonthlyEvaporation.OverriddenEvapotranspirationRate && !isEditing ? 'red' : 'black'}" *ngFor="let parcelMonthlyEvaporation of getParcelEvaporationMonthlyData(parcel)">
                                        {{ !isEditing && parcelMonthlyEvaporation.OverriddenEvapotranspirationRate ? parcelMonthlyEvaporation.OverriddenEvapotranspirationRate : parcelMonthlyEvaporation.EvapotranspirationRate}} 
                                        <input [(ngModel)]="parcelMonthlyEvaporation.OverriddenEvapotranspirationRate" style="width:50px" *ngIf="isEditing"></td>
                                </tr>
                                <tr>
                                    <td><strong>Total</strong></td>
                                    <td class="text-right" *ngFor="let month of months; let i = index">{{getTotalWaterUsageForMonth(i+1) | number : '1.4'}}</td>
                                </tr>
                            </tbody>                            
                        </table>                        
                    </div>
                    <ng-container *ngIf="isEditing">
                        <button class="btn btn-secondary btn-sm" style="float:right" (click)="cancelOverrideEtChanges()">Cancel</button>
                        <button class="btn btn-rio btn-sm mr-3" style="float:right" (click)="confirmSaveOverrideEtChanges()">Save</button>
                    </ng-container>
                </div>
            </div>
        </div>
    </div>
</div>